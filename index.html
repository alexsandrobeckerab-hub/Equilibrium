<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equilibrium - Trilogia</title>
    <link rel="icon" type="image/png" href="https://via.placeholder.com/32x32?text=EQ">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&family=Open+Sans:wght@400;700&family=EB+Garamond:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* CSS Variables for theming */
        :root {
            --primary-color: #a53860; /* Rosa escuro */
            --secondary-color: #662e9b; /* Roxo */
            --accent-color: #f2a51a; /* Laranja */
            --text-color: #fcf7ff; /* Quase branco */
            --gold-color: #ffd700; /* Dourado */
            --bg-main-color: #121212; /* Fundo principal escuro */
            --bg-card-color: #1f1f1f; /* Fundo de cartão/elemento */
            --hover-color: #c74e79; /* Rosa mais claro para hover */
            --title-color: #fcf7ff; /* Cor dos títulos */
            --main-font: Arial, sans-serif;
        }

        body {
            font-family: var(--main-font);
            margin: 0;
            background-color: var(--bg-main-color);
            color: var(--text-color);
            line-height: 1.6;
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6, .logo {
            font-family: var(--main-font);
            color: var(--title-color);
            font-weight: 700;
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        a:hover {
            color: var(--hover-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navbar */
        .navbar {
            background-color: var(--bg-card-color);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .nav-links {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }
        .nav-links li {
            margin-left: 30px;
        }
        .nav-links a {
            color: var(--text-color);
            font-weight: 500;
            font-size: 1.1em;
            position: relative;
            padding-bottom: 5px;
        }
        .nav-links a::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
        }
        .nav-links a:hover::after {
            width: 100%;
        }

        .admin-button {
            background-color: var(--secondary-color);
            color: var(--text-color);
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-right: 20px;
        }
        .admin-button:hover {
            background-color: var(--primary-color);
        }
        .admin-button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://via.placeholder.com/1920x1080?text=Hero+Image') no-repeat center center/cover;
            color: var(--text-color);
        }
        .hero-content {
            max-width: 800px;
            padding: 20px;
        }
        .hero h1 {
            font-size: 4em;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
        }
        .hero p {
            font-size: 1.5em;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        .btn {
            background-color: var(--primary-color);
            color: var(--text-color);
            padding: 15px 30px;
            border-radius: 5px;
            text-transform: uppercase;
            font-weight: bold;
            transition: background-color 0.3s ease, transform 0.3s ease;
            display: inline-block;
        }
        .btn:hover {
            background-color: var(--hover-color);
            transform: translateY(-3px);
        }

        /* Section Styling */
        section {
            padding: 80px 0;
            text-align: center;
        }
        section h2 {
            font-size: 3em;
            margin-bottom: 40px;
            position: relative;
            padding-bottom: 10px;
        }
        section h2::after {
            content: '';
            position: absolute;
            left: 50%;
            bottom: 0;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background-color: var(--primary-color);
            border-radius: 2px;
        }
        .section-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            margin-top: 50px;
        }

        /* Trilogy Section */
        .book-card {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            padding: 30px;
            max-width: 350px;
            text-align: left;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .book-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        }
        .book-card img {
            max-width: 100%;
            border-radius: 5px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .book-card h3 {
            font-size: 1.8em;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        .book-card p {
            font-size: 1.1em;
            color: var(--text-color);
        }

        /* Characters Section */
        .character-card {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            max-width: 300px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .character-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        }
        .character-card img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            object-position: center;
            display: block;
        }
        .character-info {
            padding: 20px;
            text-align: center;
        }
        .character-info h3 {
            font-size: 1.8em;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        .character-info p {
            font-size: 1.1em;
            color: var(--text-color);
        }

        /* Gallery Section */
        .gallery-filters {
            margin-bottom: 40px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .gallery-filters button {
            background-color: var(--bg-card-color);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            font-size: 1em;
        }
        .gallery-filters button.active,
        .gallery-filters button:hover {
            background-color: var(--primary-color);
            border-color: var(--hover-color);
        }
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }
        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        .gallery-item:hover img {
            transform: scale(1.1);
        }
        .gallery-item-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            padding: 20px;
            text-align: center;
        }
        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
        }
        .gallery-item-overlay h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        .gallery-item-overlay p {
            font-size: 0.9em;
        }

        /* Videos Section */
        .video-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
            gap: 15px;
            flex-wrap: wrap;
        }
        .video-tabs button {
            background-color: var(--bg-card-color);
            color: var(--text-color);
            border: 1px solid var(--primary-color);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
            font-size: 1em;
        }
        .video-tabs button.active,
        .video-tabs button:hover {
            background-color: var(--primary-color);
            border-color: var(--hover-color);
        }
        .video-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .video-content.active {
            display: block;
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .video-item {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .video-item:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6);
        }
        .video-item .video-responsive {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            height: 0;
            overflow: hidden;
        }
        .video-item .video-responsive iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        .video-item h3 {
            padding: 20px;
            font-size: 1.5em;
            margin: 0;
            color: var(--primary-color);
        }
        .video-item p {
            padding: 0 20px 20px;
            font-size: 1em;
            color: var(--text-color);
        }

        /* Footer */
        .footer {
            background-color: var(--bg-card-color);
            color: var(--text-color);
            padding: 40px 0;
            text-align: center;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
        }
        .footer .social-links a {
            color: var(--text-color);
            font-size: 1.8em;
            margin: 0 15px;
            transition: color 0.3s ease;
        }
        .footer .social-links a:hover {
            color: var(--primary-color);
        }
        .footer p {
            margin-top: 20px;
            font-size: 0.9em;
        }

        /* Admin Panel Overlay */
        .admin-panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .admin-panel-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .admin-panel {
            background-color: var(--bg-main-color);
            color: var(--text-color);
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.8);
            width: 90%;
            max-width: 900px;
            height: 90%;
            max-height: 700px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: var(--primary-color);
            border-bottom: 1px solid var(--hover-color);
        }
        .admin-header h2 {
            margin: 0;
            color: var(--text-color);
        }
        .close-admin-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.8em;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .close-admin-btn:hover {
            color: var(--bg-card-color);
        }

        .admin-login-form {
            padding: 40px;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
        }
        .admin-login-form h3 {
            margin-bottom: 30px;
            font-size: 2em;
            color: var(--primary-color);
        }
        .admin-login-form input {
            width: 100%;
            max-width: 300px;
            padding: 12px 15px;
            margin-bottom: 20px;
            border: 1px solid var(--hover-color);
            border-radius: 5px;
            background-color: var(--bg-card-color);
            color: var(--text-color);
            font-size: 1em;
        }
        .admin-login-form input::placeholder {
            color: #aaa;
        }
        .admin-login-form button {
            width: 100%;
            max-width: 300px;
            padding: 12px 15px;
            font-size: 1.1em;
            cursor: pointer;
        }
        #login-error-message {
            color: #ff6b6b;
            margin-top: 15px;
        }

        .admin-dashboard {
            display: flex;
            flex-grow: 1;
            display: none; /* Hidden until logged in */
        }
        .admin-nav {
            width: 200px;
            background-color: var(--bg-card-color);
            padding: 20px 0;
            border-right: 1px solid var(--bg-main-color);
            flex-shrink: 0;
        }
        .admin-nav button {
            display: block;
            width: 100%;
            padding: 15px 20px;
            background: none;
            border: none;
            color: var(--text-color);
            text-align: left;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, color 0.3s ease;
            border-left: 5px solid transparent;
        }
        .admin-nav button:hover {
            background-color: var(--bg-main-color);
            color: var(--primary-color);
        }
        .admin-nav button.active {
            background-color: var(--primary-color);
            color: var(--text-color);
            border-left: 5px solid var(--gold-color);
        }

        .admin-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: var(--bg-main-color);
        }
        .admin-tab-content {
            display: none;
        }
        .admin-tab-content.active {
            display: block;
        }

        /* Form elements within admin */
        .admin-content form {
            background-color: var(--bg-card-color);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .admin-content label {
            display: block;
            margin-bottom: 8px;
            color: var(--primary-color);
            font-weight: bold;
        }
        .admin-content input[type="text"],
        .admin-content input[type="number"],
        .admin-content input[type="file"],
        .admin-content textarea,
        .admin-content select {
            width: calc(100% - 22px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #444;
            border-radius: 5px;
            background-color: var(--bg-main-color);
            color: var(--text-color);
            font-size: 1em;
        }
        .admin-content textarea {
            resize: vertical;
            min-height: 80px;
        }
        .admin-content button.btn {
            padding: 10px 20px;
            font-size: 1em;
        }

        /* Drag & Drop Area */
        .drop-area {
            border: 2px dashed var(--primary-color);
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        .drop-area.highlight {
            background-color: #333;
            border-color: var(--gold-color);
        }
        .drop-area p {
            margin: 0;
            color: var(--text-color);
            font-size: 1.1em;
        }
        .drop-area input {
            display: none;
        }

        /* Upload/Delete List */
        .item-list {
            list-style: none;
            padding: 0;
        }
        .item-list li {
            background-color: var(--bg-card-color);
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        .item-list li img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 15px;
        }
        .item-list li span {
            flex-grow: 1;
            color: var(--text-color);
        }
        .item-list li button {
            background-color: #ff6b6b;
            color: var(--text-color);
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .item-list li button:hover {
            background-color: #e04b4b;
        }
        .item-list li .video-thumbnail {
            width: 100px;
            height: 60px;
            background-size: cover;
            background-position: center;
            border-radius: 5px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .status-message {
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }
        .status-message.success {
            background-color: #4CAF50;
            color: white;
        }
        .status-message.error {
            background-color: #f44336;
            color: white;
        }

        /* Theme Settings Admin */
        #theme-settings-admin .theme-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        #theme-settings-admin h4 {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 20px;
            color: var(--gold-color);
            font-size: 1.5em;
        }
        #theme-settings-admin .color-picker-group,
        #theme-settings-admin .font-selector-group {
            display: flex;
            align-items: center;
            gap: 10px;
            background-color: var(--bg-card-color);
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        #theme-settings-admin label {
            flex-shrink: 0;
            margin-bottom: 0;
            color: var(--text-color);
            font-weight: normal;
        }
        #theme-settings-admin input[type="color"] {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            border: none;
            width: 40px;
            height: 40px;
            padding: 0;
            cursor: pointer;
            background: none;
        }
        #theme-settings-admin input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        #theme-settings-admin input[type="color"]::-webkit-color-swatch {
            border: 2px solid var(--primary-color);
            border-radius: 5px;
        }
        #theme-settings-admin input[type="color"]::-moz-color-swatch-wrapper {
            padding: 0;
        }
        #theme-settings-admin input[type="color"]::-moz-color-swatch {
            border: 2px solid var(--primary-color);
            border-radius: 5px;
        }
        #theme-settings-admin select {
            flex-grow: 1;
        }
        #theme-settings-admin .theme-actions {
            text-align: center;
            margin-top: 30px;
        }
        #theme-settings-admin .theme-actions button {
            margin: 0 10px;
        }
        #theme-status {
            margin-top: 20px;
            min-height: 40px; /* Para evitar mudança de layout */
        }


        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar .nav-links {
                display: none;
            }
            .navbar .container {
                flex-direction: column;
                gap: 10px;
            }
            .logo {
                margin: 0;
            }
            .admin-button {
                margin: 0;
            }
            .hero h1 {
                font-size: 2.5em;
            }
            .hero p {
                font-size: 1.2em;
            }
            section {
                padding: 50px 0;
            }
            section h2 {
                font-size: 2em;
            }
            .section-content, .gallery-grid, .video-grid {
                grid-template-columns: 1fr;
            }
            .book-card, .character-card {
                max-width: 100%;
            }
            .admin-panel {
                width: 95%;
                height: 95%;
            }
            .admin-dashboard {
                flex-direction: column;
            }
            .admin-nav {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--bg-main-color);
                display: flex;
                overflow-x: auto;
                white-space: nowrap;
                padding: 10px 0;
            }
            .admin-nav button {
                flex-shrink: 0;
                border-left: none;
                border-bottom: 5px solid transparent;
            }
            .admin-nav button.active {
                border-left: none;
                border-bottom: 5px solid var(--gold-color);
            }
            .admin-content {
                padding: 15px;
            }
            #theme-settings-admin .theme-controls {
                grid-template-columns: 1fr;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="#" class="logo">Equilibrium</a>
            <ul class="nav-links">
                <li><a href="#trilogy">Trilogia</a></li>
                <li><a href="#characters">Personagens</a></li>
                <li><a href="#gallery">Imagens</a></li>
                <li><a href="#videos">Vídeos</a></li>
            </ul>
            <button class="admin-button" id="admin-login-button" disabled>Admin</button>
        </div>
    </nav>

    <header class="hero">
        <div class="hero-content">
            <h1>Bem-vindo ao Mundo de Sunagori</h1>
            <p>Embarque em uma jornada épica de magia, mistério e destino na trilogia Equilibrium.</p>
            <a href="#trilogy" class="btn">Conheça a Trilogia</a>
        </div>
    </header>

    <section id="trilogy">
        <div class="container">
            <h2>A Trilogia Equilibrium</h2>
            <div class="section-content" id="trilogy-content">
                <div class="book-card">
                    <img src="https://via.placeholder.com/300x450?text=Livro+1" alt="Capa do Livro 1">
                    <h3>Livro 1: O Despertar</h3>
                    <p>No primeiro volume, Sunagori descobre seus poderes e o legado que a espera. Uma profecia antiga se revela, lançando-a em um conflito entre reinos.</p>
                </div>
                <div class="book-card">
                    <img src="https://via.placeholder.com/300x450?text=Livro+2" alt="Capa do Livro 2">
                    <h3>Livro 2: A Ascensão</h3>
                    <p>O segundo livro aprofunda os mistérios de Equilibrium, com Sunagori enfrentando traições e forjando alianças inesperadas para salvar seu mundo.</p>
                </div>
                <div class="book-card">
                    <img src="https://via.placeholder.com/300x450?text=Livro+3" alt="Capa do Livro 3">
                    <h3>Livro 3: O Equilíbrio Final</h3>
                    <p>No clímax da saga, Sunagori deve fazer a escolha derradeira. O destino de todos está em suas mãos enquanto ela busca o equilíbrio perdido.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="characters">
        <div class="container">
            <h2>Personagens</h2>
            <div class="section-content" id="characters-content">
                <div class="character-card">
                    <img src="https://via.placeholder.com/300x300?text=Sunagori" alt="Sunagori">
                    <div class="character-info">
                        <h3>Sunagori</h3>
                        <p>A protagonista, uma jovem com poderes ocultos e um destino grandioso.</p>
                    </div>
                </div>
                <div class="character-card">
                    <img src="https://via.placeholder.com/300x300?text=Kael" alt="Kael">
                    <div class="character-info">
                        <h3>Kael</h3>
                        <p>O misterioso mentor que guia Sunagori em sua jornada, guardando segredos antigos.</p>
                    </div>
                </div>
                <div class="character-card">
                    <img src="https://via.placeholder.com/300x300?text=Lyra" alt="Lyra">
                    <div class="character-info">
                        <h3>Lyra</h3>
                        <p>Uma poderosa maga e aliada leal, com um passado tão complexo quanto seus feitiços.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="gallery">
        <div class="container">
            <h2>Galeria de Imagens</h2>
            <div class="gallery-filters">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="characters">Personagens</button>
                <button class="filter-btn" data-filter="scenes">Cenas</button>
                <button class="filter-btn" data-filter="creatures">Criaturas</button>
            </div>
            <div class="gallery-grid" id="image-gallery">
                <!-- Imagens serão carregadas aqui pelo JS -->
                <div class="gallery-item" data-category="characters">
                    <img src="https://via.placeholder.com/400x250?text=Personagem+1" alt="Personagem 1">
                    <div class="gallery-item-overlay">
                        <h3>Personagem 1</h3>
                        <p>Descrição do Personagem 1</p>
                    </div>
                </div>
                <div class="gallery-item" data-category="scenes">
                    <img src="https://via.placeholder.com/400x250?text=Cena+1" alt="Cena 1">
                    <div class="gallery-item-overlay">
                        <h3>Cena 1</h3>
                        <p>Descrição da Cena 1</p>
                    </div>
                </div>
                <div class="gallery-item" data-category="creatures">
                    <img src="https://via.placeholder.com/400x250?text=Criatura+1" alt="Criatura 1">
                    <div class="gallery-item-overlay">
                        <h3>Criatura 1</h3>
                        <p>Descrição da Criatura 1</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="videos">
        <div class="container">
            <h2>Vídeos</h2>
            <div class="video-tabs">
                <button class="video-tab-btn active" data-tab="trailers">Trailers</button>
                <button class="video-tab-btn" data-tab="interviews">Entrevistas</button>
                <button class="video-tab-btn" data-tab="behind-the-scenes">Bastidores</button>
            </div>

            <div id="video-content-trailers" class="video-content active">
                <div class="video-grid" id="video-grid-trailers">
                    <!-- Vídeos de trailers serão carregados aqui pelo JS -->
                    <div class="video-item">
                        <div class="video-responsive">
                            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
                        </div>
                        <h3>Trailer Oficial Livro 1</h3>
                        <p>O primeiro trailer que apresentou o universo de Equilibrium.</p>
                    </div>
                </div>
            </div>

            <div id="video-content-interviews" class="video-content">
                <div class="video-grid" id="video-grid-interviews">
                    <!-- Vídeos de entrevistas serão carregados aqui pelo JS -->
                    <div class="video-item">
                        <div class="video-responsive">
                            <iframe src="https://www.youtube.com/embed/gSg3sQ9Zk_U" allowfullscreen></iframe>
                        </div>
                        <h3>Entrevista com o Autor</h3>
                        <p>O autor compartilha insights sobre a criação da trilogia.</p>
                    </div>
                </div>
            </div>

            <div id="video-content-behind-the-scenes" class="video-content">
                <div class="video-grid" id="video-grid-behind-the-scenes">
                    <!-- Vídeos de bastidores serão carregados aqui pelo JS -->
                    <div class="video-item">
                        <div class="video-responsive">
                            <iframe src="https://www.youtube.com/embed/A3_2g0nJpD4" allowfullscreen></iframe>
                        </div>
                        <h3>Bastidores da Criação Visual</h3>
                        <p>Veja como as ilustrações e conceitos visuais ganharam vida.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="social-links">
                <a href="#"><i class="fab fa-facebook-f"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
            </div>
            <p>&copy; 2023 Equilibrium - Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Admin Panel Overlay -->
    <div class="admin-panel-overlay" id="admin-panel-overlay">
        <div class="admin-panel">
            <div class="admin-header">
                <h2 id="admin-title">Login Admin</h2>
                <button class="close-admin-btn" id="close-admin-btn"><i class="fas fa-times"></i></button>
            </div>

            <!-- Admin Login Form -->
            <div class="admin-login-form active" id="admin-login-form">
                <h3>Acesso Restrito</h3>
                <input type="password" id="admin-password" placeholder="Senha do Administrador">
                <button class="btn" id="login-btn">Entrar</button>
                <p id="login-error-message" style="color: red; margin-top: 10px;"></p>
            </div>

            <!-- Admin Dashboard -->
            <div class="admin-dashboard" id="admin-dashboard">
                <nav class="admin-nav">
                    <button class="admin-nav-btn active" data-tab="photos">Fotos</button>
                    <button class="admin-nav-btn" data-tab="videos">Vídeos</button>
                    <button class="admin-nav-btn" data-tab="trilogy">Trilogia</button>
                    <button class="admin-nav-btn" data-tab="characters">Personagens</button>
                    <button class="admin-nav-btn" data-tab="theme-settings">Configurações do Tema</button>
                    <button class="admin-nav-btn" data-tab="settings">Configurações</button>
                </nav>

                <div class="admin-content">
                    <!-- Photos Admin Tab -->
                    <div id="photos-admin" class="admin-tab-content active">
                        <h3>Gerenciar Fotos da Galeria</h3>
                        <div class="drop-area" id="drop-area">
                            <p>Arraste e solte imagens aqui ou clique para selecionar</p>
                            <input type="file" id="image-upload-input" accept="image/*" multiple>
                        </div>
                        <form id="upload-image-form" style="display: none;">
                            <label for="image-category">Categoria:</label>
                            <select id="image-category">
                                <option value="characters">Personagens</option>
                                <option value="scenes">Cenas</option>
                                <option value="creatures">Criaturas</option>
                            </select>
                            <label for="image-title">Título:</label>
                            <input type="text" id="image-title" placeholder="Título da imagem">
                            <label for="image-description">Descrição:</label>
                            <textarea id="image-description" placeholder="Descrição da imagem"></textarea>
                            <button type="submit" class="btn">Enviar Imagem</button>
                            <div id="upload-image-status" class="status-message"></div>
                        </form>
                        <hr style="margin: 30px 0; border-color: #333;">
                        <h4>Imagens Existentes</h4>
                        <ul id="existing-images-list" class="item-list">
                            <!-- Imagens existentes serão carregadas aqui -->
                        </ul>
                    </div>

                    <!-- Videos Admin Tab -->
                    <div id="videos-admin" class="admin-tab-content">
                        <h3>Gerenciar Vídeos</h3>
                        <form id="add-video-form">
                            <label for="video-tab">Guia (Tab):</label>
                            <select id="video-tab">
                                <option value="trailers">Trailers</option>
                                <option value="interviews">Entrevistas</option>
                                <option value="behind-the-scenes">Bastidores</option>
                            </select>
                            <label for="video-youtube-id">ID do YouTube:</label>
                            <input type="text" id="video-youtube-id" placeholder="Ex: dQw4w9WgXcQ">
                            <label for="video-title">Título:</label>
                            <input type="text" id="video-title" placeholder="Título do vídeo">
                            <label for="video-description">Descrição:</label>
                            <textarea id="video-description" placeholder="Descrição do vídeo"></textarea>
                            <button type="submit" class="btn">Adicionar Vídeo</button>
                            <div id="add-video-status" class="status-message"></div>
                        </form>
                        <hr style="margin: 30px 0; border-color: #333;">
                        <h4>Vídeos Existentes</h4>
                        <ul id="existing-videos-list" class="item-list">
                            <!-- Vídeos existentes serão carregados aqui -->
                        </ul>
                    </div>

                    <!-- Trilogy Admin Tab -->
                    <div id="trilogy-admin" class="admin-tab-content">
                        <h3>Gerenciar Livros da Trilogia</h3>
                        <form id="edit-book-form">
                            <label for="book-select">Selecionar Livro:</label>
                            <select id="book-select">
                                <option value="book1">Livro 1: O Despertar</option>
                                <option value="book2">Livro 2: A Ascensão</option>
                                <option value="book3">Livro 3: O Equilíbrio Final</option>
                            </select>
                            <label for="book-title-input">Título:</label>
                            <input type="text" id="book-title-input">
                            <label for="book-description-input">Descrição:</label>
                            <textarea id="book-description-input"></textarea>
                            <label for="book-image-url-input">URL da Capa:</label>
                            <input type="text" id="book-image-url-input" placeholder="URL da imagem (ex: via.placeholder.com/300x450)">
                            <button type="submit" class="btn">Salvar Alterações</button>
                            <div id="edit-book-status" class="status-message"></div>
                        </form>
                    </div>

                    <!-- Characters Admin Tab -->
                    <div id="characters-admin" class="admin-tab-content">
                        <h3>Gerenciar Personagens</h3>
                        <form id="add-character-form">
                            <h4>Adicionar Novo Personagem</h4>
                            <label for="character-name-input">Nome:</label>
                            <input type="text" id="character-name-input" placeholder="Nome do Personagem">
                            <label for="character-description-input">Descrição:</label>
                            <textarea id="character-description-input" placeholder="Descrição do personagem"></textarea>
                            <label for="character-image-url-input">URL da Imagem:</label>
                            <input type="text" id="character-image-url-input" placeholder="URL da imagem (ex: via.placeholder.com/300x300)">
                            <button type="submit" class="btn">Adicionar Personagem</button>
                            <div id="add-character-status" class="status-message"></div>
                        </form>
                        <hr style="margin: 30px 0; border-color: #333;">
                        <h4>Personagens Existentes</h4>
                        <ul id="existing-characters-list" class="item-list">
                            <!-- Personagens existentes serão carregados aqui -->
                        </ul>
                    </div>

                    <!-- Theme Settings Admin Tab -->
                    <div id="theme-settings-admin" class="admin-tab-content">
                        <h3>Configurações do Tema</h3>
                        <div class="theme-controls">
                            <h4>Cores</h4>
                            <div class="color-picker-group">
                                <label for="primary-color-picker">Primária:</label>
                                <input type="color" id="primary-color-picker" value="#a53860">
                            </div>
                            <div class="color-picker-group">
                                <label for="secondary-color-picker">Secundária:</label>
                                <input type="color" id="secondary-color-picker" value="#662e9b">
                            </div>
                            <div class="color-picker-group">
                                <label for="accent-color-picker">Acentuação:</label>
                                <input type="color" id="accent-color-picker" value="#f2a51a">
                            </div>
                            <div class="color-picker-group">
                                <label for="text-color-picker">Texto:</label>
                                <input type="color" id="text-color-picker" value="#fcf7ff">
                            </div>
                            <div class="color-picker-group">
                                <label for="gold-color-picker">Ouro:</label>
                                <input type="color" id="gold-color-picker" value="#ffd700">
                            </div>
                            <div class="color-picker-group">
                                <label for="bg-main-color-picker">Fundo Principal:</label>
                                <input type="color" id="bg-main-color-picker" value="#121212">
                            </div>
                            <div class="color-picker-group">
                                <label for="bg-card-color-picker">Fundo Cartão:</label>
                                <input type="color" id="bg-card-color-picker" value="#1f1f1f">
                            </div>
                            <div class="color-picker-group">
                                <label for="hover-color-picker">Hover:</label>
                                <input type="color" id="hover-color-picker" value="#c74e79">
                            </div>
                            <div class="color-picker-group">
                                <label for="title-color-picker">Títulos:</label>
                                <input type="color" id="title-color-picker" value="#fcf7ff">
                            </div>

                            <h4>Fontes</h4>
                            <div class="font-selector-group">
                                <label for="font-family-selector">Fonte:</label>
                                <select id="font-family-selector">
                                    <option value="Arial, sans-serif">Arial</option>
                                    <option value="'Roboto', sans-serif">Roboto</option>
                                    <option value="'Open Sans', sans-serif">Open Sans</option>
                                    <option value="Georgia, serif">Georgia</option>
                                    <option value="'EB Garamond', serif">EB Garamond Medium</option>
                                </select>
                            </div>
                        </div>
                        <div class="theme-actions">
                            <button class="btn" id="save-theme-btn">Salvar Tema</button>
                            <button class="btn" id="restore-default-theme-btn">Restaurar Padrão</button>
                        </div>
                        <div id="theme-status" class="status-message"></div>
                    </div>

                    <!-- General Settings Admin Tab -->
                    <div id="settings-admin" class="admin-tab-content">
                        <h3>Configurações do Admin</h3>
                        <button class="btn logout-btn" id="admin-logout-btn">Sair</button>
                        <p style="margin-top: 1rem; text-align: center; font-size: 0.9em; color: var(--text-color);">
                            (Esta é uma área de protótipo. A senha 'admin123' não é segura para produção.)
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>

    <script>
        // Your Firebase project configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD-o0hS692HW7F_13p8cPPS8TWfkIPf90c",
            authDomain: "equilibrium-alex-2.firebaseapp.com",
            databaseURL: "https://equilibrium-alex-2-default-rtdb.firebaseio.com",
            projectId: "equilibrium-alex-2",
            storageBucket: "equilibrium-alex-2.firebasestorage.app",
            messagingSenderId: "684128804738",
            appId: "1:684128804738:web:a9ba266b2a53d82bc7799b"
        };

        // Initialize Firebase
        let app;
        try {
            app = firebase.initializeApp(firebaseConfig);
            console.log("Firebase initialized successfully.");
            document.getElementById('admin-login-button').disabled = false; // Enable admin button
        } catch (error) {
            console.error("Firebase initialization failed:", error);
            document.getElementById('admin-login-button').disabled = true; // Keep disabled if error
            alert("Erro ao inicializar Firebase. Verifique suas credenciais.");
        }

        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();
        const storageRef = storage.ref();

        // Default Theme
        const defaultTheme = {
            'primary-color': '#a53860',
            'secondary-color': '#662e9b',
            'accent-color': '#f2a51a',
            'text-color': '#fcf7ff',
            'gold-color': '#ffd700',
            'bg-main-color': '#121212',
            'bg-card-color': '#1f1f1f',
            'hover-color': '#c74e79',
            'title-color': '#fcf7ff',
            'main-font': 'Arial, sans-serif'
        };

        // Function to apply theme to CSS variables
        function applyTheme(theme) {
            const root = document.documentElement;
            for (const key in theme) {
                root.style.setProperty(`--${key}`, theme[key]);
            }
        }

        // Function to load theme from Firebase
        function loadTheme() {
            database.ref('theme').once('value', (snapshot) => {
                const savedTheme = snapshot.val();
                if (savedTheme) {
                    applyTheme(savedTheme);
                    // Update color pickers and font selector in admin panel
                    for (const key in savedTheme) {
                        const inputId = `${key.replace(/-/g, '-')}-picker`;
                        const inputElement = document.getElementById(inputId);
                        if (inputElement && inputElement.type === 'color') {
                            inputElement.value = savedTheme[key];
                        }
                        if (key === 'main-font') {
                            const fontSelector = document.getElementById('font-family-selector');
                            if (fontSelector) {
                                fontSelector.value = savedTheme[key];
                            }
                        }
                    }
                } else {
                    applyTheme(defaultTheme); // Apply default if no theme saved
                }
            }, (error) => {
                console.error("Erro ao carregar tema do Firebase:", error);
                applyTheme(defaultTheme); // Fallback to default
            });
        }

        // --- Document Ready / Initialization ---
        $(document).ready(function() {
            loadTheme(); // Load theme on page load

            // --- Smooth Scrolling ---
            $('a[href^="#"]').on('click', function(event) {
                event.preventDefault();
                $('html, body').animate({
                    scrollTop: $($.attr(this, 'href')).offset().top
                }, 800);
            });

            // --- Admin Panel Logic ---
            const adminLoginButton = $('#admin-login-button');
            const adminPanelOverlay = $('#admin-panel-overlay');
            const closeAdminBtn = $('#close-admin-btn');
            const adminLoginForm = $('#admin-login-form');
            const adminDashboard = $('#admin-dashboard');
            const loginBtn = $('#login-btn');
            const adminPasswordInput = $('#admin-password');
            const loginErrorMessage = $('#login-error-message');
            const adminNavBtns = $('.admin-nav-btn');
            const adminTabContents = $('.admin-tab-content');
            const adminLogoutBtn = $('#admin-logout-btn');

            // Show admin panel
            adminLoginButton.on('click', function() {
                adminPanelOverlay.addClass('active');
            });

            // Close admin panel
            closeAdminBtn.on('click', function() {
                adminPanelOverlay.removeClass('active');
                adminPasswordInput.val(''); // Clear password
                loginErrorMessage.text('');
                // Reset to login form on close
                adminLoginForm.addClass('active').show();
                adminDashboard.removeClass('active').hide();
                $('#admin-title').text('Login Admin');

                // Clear any pending upload form
                $('#upload-image-form').hide();
            });

            // Admin Login
            loginBtn.on('click', async function() {
                const password = adminPasswordInput.val();
                if (password === 'admin123') { // Simple password check (NOT secure for production!)
                    try {
                        // Use anonymous auth to persist session, then "sign in" with pseudo-admin
                        await auth.signInAnonymously();
                        console.log("Admin logged in (pseudo-authenticated)");

                        adminLoginForm.removeClass('active').hide();
                        adminDashboard.addClass('active').css('display', 'flex'); // Use flex for dashboard
                        $('#admin-title').text('Dashboard Admin');

                        // Load initial admin data
                        loadAdminData();
                        loadThemeDataForAdmin(); // Load theme data for admin pickers
                    } catch (error) {
                        console.error("Error during anonymous sign-in:", error);
                        loginErrorMessage.text("Erro ao autenticar. Tente novamente.");
                    }
                } else {
                    loginErrorMessage.text("Senha incorreta.");
                }
            });

            // Admin Logout
            adminLogoutBtn.on('click', async function() {
                try {
                    await auth.signOut();
                    console.log("Admin logged out.");
                    adminPanelOverlay.removeClass('active');
                    adminPasswordInput.val('');
                    loginErrorMessage.text('');
                    adminLoginForm.addClass('active').show();
                    adminDashboard.removeClass('active').hide();
                    $('#admin-title').text('Login Admin');
                } catch (error) {
                    console.error("Error during logout:", error);
                }
            });

            // Admin Nav Tabs
            adminNavBtns.on('click', function() {
                adminNavBtns.removeClass('active');
                $(this).addClass('active');
                const targetTab = $(this).data('tab');

                adminTabContents.removeClass('active').hide();
                $(`#${targetTab}-admin`).addClass('active').show();
            });

            // --- General Admin Data Loading (Trilogy, Characters, Gallery, Videos) ---
            function loadAdminData() {
                // Load and display existing gallery images
                database.ref('gallery').on('value', (snapshot) => {
                    const imageList = $('#existing-images-list');
                    imageList.empty();
                    for (const id in images) {
                        const img = images[id];
                        imageList.append(`
                            <li>
                                <img src="${img.url}" alt="${img.title}">
                                <span>${img.title} (${img.category})</span>
                                <button data-id="${id}" data-url="${img.url}" class="delete-image-btn">Excluir</button>
                            </li>
                        `);
                    }
                });

                // Load and display existing videos
                database.ref('videos').on('value', (snapshot) => {
                    const videoList = $('#existing-videos-list');
                    videoList.empty();
                    for (const id in videos) {
                        const video = videos[id];
                        videoList.append(`
                            <li>
                                <div class="video-thumbnail" style="background-image: url('https://img.youtube.com/vi/${video.youtubeId}/default.jpg');"></div>
                                <span>${video.title} (${video.tab})</span>
                                <button data-id="${id}" class="delete-video-btn">Excluir</button>
                            </li>
                        `);
                    }
                });

                // Load Trilogy data for editing
                database.ref('trilogy').on('value', (snapshot) => {
                    const bookSelect = $('#book-select');
                    bookSelect.empty();
                    let firstBookId = '';
                    for (const id in books) {
                        const book = books[id];
                        bookSelect.append(`<option value="${id}">${book.title}</option>`);
                        if (!firstBookId) firstBookId = id;
                    }
                    if (firstBookId) {
                        bookSelect.val(firstBookId);
                        updateBookEditForm(books[firstBookId]);
                    }
                });

                // Load Characters data for managing
                database.ref('characters').on('value', (snapshot) => {
                    const charList = $('#existing-characters-list');
                    charList.empty();
                    for (const id in chars) {
                        const char = chars[id];
                        charList.append(`
                            <li>
                                <img src="${char.imageUrl}" alt="${char.name}">
                                <span>${char.name}</span>
                                <button data-id="${id}" class="delete-character-btn">Excluir</button>
                            </li>
                        `);
                    }
                });
            }

            // Function to update book edit form fields
            function updateBookEditForm(bookData) {
                $('#book-title-input').val(bookData.title);
                $('#book-description-input').val(bookData.description);
                $('#book-image-url-input').val(bookData.imageUrl);
            }

            $('#book-select').on('change', function() {
                const bookId = $(this).val();
                database.ref('trilogy/' + bookId).once('value', (snapshot) => {
                    updateBookEditForm(snapshot.val());
                });
            });

            // --- Theme Settings Admin Logic ---
            const colorPickers = $('.color-picker-group input[type="color"]');
            const fontSelector = $('#font-family-selector');
            const saveThemeBtn = $('#save-theme-btn');
            const restoreDefaultThemeBtn = $('#restore-default-theme-btn');
            const themeStatus = $('#theme-status');

            // Event listener for color pickers to apply changes in real-time
            colorPickers.on('input', function() {
                const cssVar = `--${this.id.replace('-picker', '')}`;
                document.documentElement.style.setProperty(cssVar, this.value);
            });

            // Event listener for font selector to apply changes in real-time
            fontSelector.on('change', function() {
                document.documentElement.style.setProperty('--main-font', this.value);
            });

            // Function to load theme data into admin pickers (separate from public loadTheme)
            function loadThemeDataForAdmin() {
                database.ref('theme').once('value', (snapshot) => {
                    const savedTheme = snapshot.val();
                    if (savedTheme) {
                        colorPickers.each(function() {
                            const key = this.id.replace('-picker', '');
                            if (savedTheme[key]) {
                                this.value = savedTheme[key];
                            }
                        });
                        if (savedTheme['main-font']) {
                            fontSelector.val(savedTheme['main-font']);
                        }
                        applyTheme(savedTheme); // Ensure theme is applied
                    } else {
                        // If no saved theme, set pickers to default
                        colorPickers.each(function() {
                            const key = this.id.replace('-picker', '');
                            if (defaultTheme[key]) {
                                this.value = defaultTheme[key];
                            }
                        });
                        fontSelector.val(defaultTheme['main-font']);
                        applyTheme(defaultTheme);
                    }
                }, (error) => {
                    console.error("Erro ao carregar tema para admin:", error);
                    applyTheme(defaultTheme);
                });
            }

            // Save Theme button
            saveThemeBtn.on('click', async function() {
                const currentTheme = {};
                colorPickers.each(function() {
                    const key = this.id.replace('-picker', '');
                    currentTheme[key] = this.value;
                });
                currentTheme['main-font'] = fontSelector.val();

                try {
                    await database.ref('theme').set(currentTheme);
                    themeStatus.text('Tema salvo com sucesso!').removeClass('error').addClass('success').show();
                    setTimeout(() => themeStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao salvar tema:", error);
                    themeStatus.text('Erro ao salvar tema.').removeClass('success').addClass('error').show();
                    setTimeout(() => themeStatus.fadeOut(), 3000);
                }
            });

            // Restore Default Theme button
            restoreDefaultThemeBtn.on('click', async function() {
                try {
                    await database.ref('theme').remove(); // Remove saved theme
                    applyTheme(defaultTheme); // Apply default to page
                    // Reset pickers to default values
                    colorPickers.each(function() {
                        const key = this.id.replace('-picker', '');
                        if (defaultTheme[key]) {
                            this.value = defaultTheme[key];
                        }
                    });
                    fontSelector.val(defaultTheme['main-font']);
                    themeStatus.text('Tema restaurado para o padrão!').removeClass('error').addClass('success').show();
                    setTimeout(() => themeStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao restaurar tema padrão:", error);
                    themeStatus.text('Erro ao restaurar tema padrão.').removeClass('success').addClass('error').show();
                    setTimeout(() => themeStatus.fadeOut(), 3000);
                }
            });


            // --- GALLERY SECTION LOGIC ---
            const galleryRef = database.ref('gallery');
            const imageGallery = $('#image-gallery');
            const filterBtns = $('.filter-btn');

            function loadImageGallery() {
                galleryRef.on('value', (snapshot) => {
                    const images = snapshot.val();
                    imageGallery.empty();
                    if (images) {
                        for (const id in images) {
                            const img = images[id];
                            imageGallery.append(`
                                <div class="gallery-item" data-category="${img.category}" data-id="${id}">
                                    <img src="${img.url}" alt="${img.title}">
                                    <div class="gallery-item-overlay">
                                        <h3>${img.title}</h3>
                                        <p>${img.description}</p>
                                    </div>
                                </div>
                            `);
                        }
                    } else {
                        imageGallery.append('<p style="grid-column: 1 / -1; color: #aaa;">Nenhuma imagem na galeria ainda.</p>');
                    }
                }, (error) => {
                    console.error("Erro ao carregar galeria:", error);
                });
            }
            loadImageGallery(); // Load gallery on public page load

            filterBtns.on('click', function() {
                filterBtns.removeClass('active');
                $(this).addClass('active');
                const filter = $(this).data('filter');

                $('.gallery-item').each(function() {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });

            // --- VIDEOS SECTION LOGIC ---
            const videosRef = database.ref('videos');
            const videoTabBtns = $('.video-tab-btn');
            const videoContentDivs = $('.video-content');

            function loadVideoSection() {
                videosRef.on('value', (snapshot) => {
                    const videos = snapshot.val();
                    videoContentDivs.find('.video-grid').empty(); // Clear existing videos

                    if (videos) {
                        for (const id in videos) {
                            const video = videos[id];
                            $(`#video-grid-${video.tab}`).append(`
                                <div class="video-item" data-id="${id}">
                                    <div class="video-responsive">
                                        <iframe src="https://www.youtube.com/embed/${video.youtubeId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </div>
                                    <h3>${video.title}</h3>
                                    <p>${video.description}</p>
                                </div>
                            `);
                        }
                    } else {
                        videoContentDivs.find('.video-grid').append('<p style="grid-column: 1 / -1; color: #aaa;">Nenhum vídeo disponível nesta categoria ainda.</p>');
                    }
                }, (error) => {
                    console.error("Erro ao carregar vídeos:", error);
                });
            }
            loadVideoSection(); // Load videos on public page load

            videoTabBtns.on('click', function() {
                videoTabBtns.removeClass('active');
                $(this).addClass('active');
                const targetTab = $(this).data('tab');

                videoContentDivs.removeClass('active');
                $(`#video-content-${targetTab}`).addClass('active');
            });

            // --- TRILOGY SECTION LOGIC ---
            const trilogyRef = database.ref('trilogy');
            const trilogyContent = $('#trilogy-content');

            function loadTrilogySection() {
                trilogyRef.on('value', (snapshot) => {
                    const books = snapshot.val();
                    trilogyContent.empty();
                    if (books) {
                        // Display in order (book1, book2, book3)
                        ['book1', 'book2', 'book3'].forEach(bookId => {
                            const book = books[bookId];
                            if (book) {
                                trilogyContent.append(`
                                    <div class="book-card" data-id="${bookId}">
                                        <img src="${book.imageUrl}" alt="${book.title}">
                                        <h3>${book.title}</h3>
                                        <p>${book.description}</p>
                                    </div>
                                `);
                            }
                        });
                    } else {
                        trilogyContent.append('<p style="grid-column: 1 / -1; color: #aaa;">Nenhum livro cadastrado ainda.</p>');
                    }
                }, (error) => {
                    console.error("Erro ao carregar trilogia:", error);
                });
            }
            loadTrilogySection(); // Load trilogy on public page load

            // --- CHARACTERS SECTION LOGIC ---
            const charactersRef = database.ref('characters');
            const charactersContent = $('#characters-content');

            function loadCharactersSection() {
                charactersRef.on('value', (snapshot) => {
                    const characters = snapshot.val();
                    charactersContent.empty();
                    if (characters) {
                        for (const id in characters) {
                            const char = characters[id];
                            charactersContent.append(`
                                <div class="character-card" data-id="${id}">
                                    <img src="${char.imageUrl}" alt="${char.name}">
                                    <div class="character-info">
                                        <h3>${char.name}</h3>
                                        <p>${char.description}</p>
                                    </div>
                                </div>
                            `);
                        }
                    } else {
                        charactersContent.append('<p style="grid-column: 1 / -1; color: #aaa;">Nenhum personagem cadastrado ainda.</p>');
                    }
                }, (error) => {
                    console.error("Erro ao carregar personagens:", error);
                });
            }
            loadCharactersSection(); // Load characters on public page load


            // --- ADMIN FUNCTIONALITY: IMAGE UPLOAD ---
            const dropArea = $('#drop-area');
            const imageUploadInput = $('#image-upload-input');
            const uploadImageForm = $('#upload-image-form');
            const uploadImageStatus = $('#upload-image-status');
            let selectedFile = null;

            dropArea.on('dragover', (e) => {
                e.preventDefault();
                dropArea.addClass('highlight');
            });
            dropArea.on('dragleave', () => {
                dropArea.removeClass('highlight');
            });
            dropArea.on('drop', (e) => {
                e.preventDefault();
                dropArea.removeClass('highlight');
                const files = e.originalEvent.dataTransfer.files;
                if (files.length > 0) {
                    selectedFile = files[0];
                    uploadImageForm.show();
                    uploadImageStatus.text(`Arquivo selecionado: ${selectedFile.name}`).removeClass('success error').show();
                }
            });
            dropArea.on('click', () => {
                imageUploadInput.click();
            });
            imageUploadInput.on('change', (e) => {
                const files = e.target.files;
                if (files.length > 0) {
                    selectedFile = files[0];
                    uploadImageForm.show();
                    uploadImageStatus.text(`Arquivo selecionado: ${selectedFile.name}`).removeClass('success error').show();
                }
            });

            $('#upload-image-form').on('submit', async function(e) {
                e.preventDefault();
                if (!selectedFile) {
                    uploadImageStatus.text('Nenhum arquivo selecionado.').addClass('error').show();
                    return;
                }

                uploadImageStatus.text('Enviando imagem...').removeClass('success error').show();
                const category = $('#image-category').val();
                const title = $('#image-title').val();
                const description = $('#image-description').val();

                try {
                    const fileRef = storageRef.child(`images/${selectedFile.name}`);
                    const snapshot = await fileRef.put(selectedFile);
                    const imageUrl = await snapshot.ref.getDownloadURL();

                    await galleryRef.push({
                        category: category,
                        title: title,
                        description: description,
                        url: imageUrl,
                        timestamp: firebase.database.ServerValue.TIMESTAMP
                    });

                    uploadImageStatus.text('Imagem enviada com sucesso!').addClass('success').show();
                    selectedFile = null;
                    $('#image-title').val('');
                    $('#image-description').val('');
                    uploadImageForm.hide();
                    setTimeout(() => uploadImageStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao enviar imagem:", error);
                    uploadImageStatus.text('Erro ao enviar imagem.').addClass('error').show();
                }
            });

            // Delete Image
            $(document).on('click', '.delete-image-btn', async function() {
                const imageId = $(this).data('id');
                const imageUrl = $(this).data('url');
                if (confirm('Tem certeza que deseja excluir esta imagem?')) {
                    try {
                        // Delete from Storage
                        const fileRef = storage.refFromURL(imageUrl);
                        await fileRef.delete();
                        // Delete from Realtime Database
                        await galleryRef.child(imageId).remove();
                        alert('Imagem excluída com sucesso!');
                    } catch (error) {
                        console.error("Erro ao excluir imagem:", error);
                        alert('Erro ao excluir imagem. Verifique as permissões ou se o arquivo existe.');
                    }
                }
            });


            // --- ADMIN FUNCTIONALITY: VIDEO MANAGEMENT ---
            $('#add-video-form').on('submit', async function(e) {
                e.preventDefault();
                const videoTab = $('#video-tab').val();
                const youtubeId = $('#video-youtube-id').val();
                const title = $('#video-title').val();
                const description = $('#video-description').val();
                const addVideoStatus = $('#add-video-status');

                    addVideoStatus.text('ID do YouTube e Título são obrigatórios.').addClass('error').show();
                    return;
                }

                addVideoStatus.text('Adicionando vídeo...').removeClass('success error').show();
                try {
                    await videosRef.push({
                        tab: videoTab,
                        youtubeId: youtubeId,
                        title: title,
                        timestamp: firebase.database.ServerValue.TIMESTAMP
                    });
                    addVideoStatus.text('Vídeo adicionado com sucesso!').addClass('success').show();
                    $('#video-youtube-id').val('');
                    $('#video-title').val('');
                    $('#video-description').val('');
                    setTimeout(() => addVideoStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao adicionar vídeo:", error);
                    addVideoStatus.text('Erro ao adicionar vídeo.').addClass('error').show();
                }
            });

            // Delete Video
            $(document).on('click', '.delete-video-btn', async function() {
                const videoId = $(this).data('id');
                if (confirm('Tem certeza que deseja excluir este vídeo?')) {
                    try {
                        await videosRef.child(videoId).remove();
                        alert('Vídeo excluído com sucesso!');
                    } catch (error) {
                        console.error("Erro ao excluir vídeo:", error);
                        alert('Erro ao excluir vídeo.');
                    }
                }
            });


            // --- ADMIN FUNCTIONALITY: TRILOGY EDIT ---
            $('#edit-book-form').on('submit', async function(e) {
                e.preventDefault();
                const bookId = $('#book-select').val();
                const title = $('#book-title-input').val();
                const description = $('#book-description-input').val();
                const imageUrl = $('#book-image-url-input').val();
                const editBookStatus = $('#edit-book-status');

                    editBookStatus.text('Todos os campos são obrigatórios.').addClass('error').show();
                    return;
                }

                editBookStatus.text('Salvando alterações...').removeClass('success error').show();
                try {
                    await trilogyRef.child(bookId).update({
                        title: title,
                        description: description,
                        imageUrl: imageUrl
                    });
                    editBookStatus.text('Livro atualizado com sucesso!').addClass('success').show();
                    setTimeout(() => editBookStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao atualizar livro:", error);
                    editBookStatus.text('Erro ao atualizar livro.').addClass('error').show();
                }
            });


            // --- ADMIN FUNCTIONALITY: CHARACTER MANAGEMENT ---
            $('#add-character-form').on('submit', async function(e) {
                e.preventDefault();
                const name = $('#character-name-input').val();
                const description = $('#character-description-input').val();
                const imageUrl = $('#character-image-url-input').val();
                const addCharacterStatus = $('#add-character-status');

                    addCharacterStatus.text('Todos os campos são obrigatórios.').addClass('error').show();
                    return;
                }

                addCharacterStatus.text('Adicionando personagem...').removeClass('success error').show();
                try {
                    await charactersRef.push({
                        name: name,
                        description: description,
                        imageUrl: imageUrl,
                        timestamp: firebase.database.ServerValue.TIMESTAMP
                    });
                    addCharacterStatus.text('Personagem adicionado com sucesso!').addClass('success').show();
                    $('#character-name-input').val('');
                    $('#character-description-input').val('');
                    $('#character-image-url-input').val('');
                    setTimeout(() => addCharacterStatus.fadeOut(), 3000);
                } catch (error) {
                    console.error("Erro ao adicionar personagem:", error);
                    addCharacterStatus.text('Erro ao adicionar personagem.').addClass('error').show();
                }
            });

            // Delete Character
            $(document).on('click', '.delete-character-btn', async function() {
                const characterId = $(this).data('id');
                if (confirm('Tem certeza que deseja excluir este personagem?')) {
                    try {
                        await charactersRef.child(characterId).remove();
                        alert('Personagem excluído com sucesso!');
                    } catch (error) {
                        console.error("Erro ao excluir personagem:", error);
                        alert('Erro ao excluir personagem.');
                    }
                }
            });
        });
    </script>
</body>
</html>