```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Equilibrium - O Site Oficial da Trilogia</title>
    <link rel="icon" href="https://via.placeholder.com/32x32?text=EQ" type="image/x-icon">

    <!-- Firebase SDK (Version 9) -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-storage-compat.js"></script>

    <!-- Google Fonts - New fonts for theme options -->
    <link href="https://fonts.googleapis.com/css2?family=Georgia&family=EB+Garamond+Medium&family=Roboto&family=Open+Sans&display=swap" rel="stylesheet">

    <style>
        /* CSS Variables for Theming */
        :root {
            --primary-color: #6a0572; /* Dark Purple */
            --secondary-color: #a020f0; /* Purple */
            --accent-color: #e0b0ff; /* Light Purple */
            --text-color: #f0f0f0; /* Light Gray */
            --gold-color: #ffd700; /* Gold */
            --bg-main-color: #1a1a2e; /* Dark Blue-Gray */
            --bg-card-color: #1f2838; /* Slightly lighter Blue-Gray */
            --hover-color: #8a2be2; /* Blue Violet */
            --title-color: #e0e0e0; /* Light Gray */

            /* Default Fonts - Arial */
            --main-font: Arial, sans-serif;
            --title-font: Arial, sans-serif;
        }

        body {
            font-family: var(--main-font);
            margin: 0;
            padding: 0;
            background-color: var(--bg-main-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--title-font);
            color: var(--title-color);
            margin-bottom: 0.5em;
        }

        a {
            color: var(--accent-color);
            text-decoration: none;
        }

        a:hover {
            color: var(--hover-color);
            text-decoration: underline;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background-color: var(--bg-card-color);
            padding: 15px 0;
            border-bottom: 1px solid var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        header .logo {
            font-family: var(--title-font);
            font-size: 2em;
            color: var(--gold-color);
            font-weight: bold;
            margin-left: 20px;
        }

        header nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
        }

        header nav ul li {
            margin-right: 20px;
        }

        header nav ul li a {
            color: var(--text-color);
            font-weight: bold;
        }

        header nav ul li a:hover {
            color: var(--accent-color);
        }

        .admin-button {
            background-color: var(--primary-color);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 20px;
            transition: background-color 0.3s ease;
        }

        .admin-button:hover {
            background-color: var(--hover-color);
        }

        .admin-button:disabled {
            background-color: #555;
            cursor: not-allowed;
        }

        /* Hero Section */
        .hero {
            position: relative;
            height: 600px;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://via.placeholder.com/1920x1080/000000/FFFFFF?text=Hero+Image') no-repeat center center/cover;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-main-color); /* Fallback color or gradient */
            opacity: 0.7; /* Adjust opacity for overlay effect */
            z-index: -1; /* Place behind content */
        }

        .hero-content {
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5em;
            color: var(--gold-color);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .hero p {
            font-size: 1.2em;
            color: var(--text-color);
            max-width: 600px;
            margin: 0 auto 30px auto;
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn:hover {
            background-color: var(--hover-color);
        }

        /* Trilogia Section */
        .trilogia, .personagens, .galeria, .videos {
            padding: 60px 0;
            text-align: center;
        }

        .trilogia h2, .personagens h2, .galeria h2, .videos h2 {
            font-size: 2.5em;
            margin-bottom: 40px;
            color: var(--title-color);
        }

        .trilogia-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .book-card {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .book-card:hover {
            transform: translateY(-5px);
        }

        .book-card img {
            width: 100%;
            height: auto;
            display: block;
        }

        .book-card-content {
            padding: 20px;
        }

        .book-card h3 {
            font-size: 1.5em;
            color: var(--gold-color);
            margin-bottom: 10px;
        }

        .book-card p {
            font-size: 0.9em;
            color: var(--text-color);
            margin-bottom: 15px;
        }

        /* Personagens Section */
        .personagens-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .character-card {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            text-align: center;
            padding-bottom: 20px;
            transition: transform 0.3s ease;
        }

        .character-card:hover {
            transform: translateY(-5px);
        }

        .character-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
            border-bottom: 3px solid var(--primary-color);
        }

        .character-card h3 {
            font-size: 1.6em;
            color: var(--gold-color);
            margin: 15px 0 10px 0;
        }

        .character-card p {
            font-size: 0.9em;
            color: var(--text-color);
            padding: 0 15px;
        }

        /* Galeria Section */
        .galeria .filters {
            margin-bottom: 30px;
        }

        .galeria .filters button {
            background-color: var(--secondary-color);
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
            transition: background-color 0.3s ease;
        }

        .galeria .filters button:hover,
        .galeria .filters button.active {
            background-color: var(--primary-color);
        }

        .galeria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .gallery-item {
            background-color: var(--bg-card-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .gallery-item:hover {
            transform: scale(1.03);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }

        .gallery-item p {
            padding: 15px;
            font-size: 0.9em;
            color: var(--text-color);
        }

        /* Videos Section */
        .video-tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .video-tabs button {
            background-color: var(--secondary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            margin: 0 2px;
            transition: background-color 0.3s ease;
        }

        .video-tabs button:hover,
        .video-tabs button.active {
            background-color: var(--primary-color);
        }

        .video-content {
            border: 1px solid var(--primary-color);
            background-color: var(--bg-card-color);
            border-radius: 0 0 10px 10px;
            padding: 20px;
            display: none; /* Hidden by default */
        }

        .video-content.active {
            display: block;
        }

        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .video-item {
            background-color: #2a3447;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
        }

        .video-item iframe {
            width: 100%;
            height: 200px;
            display: block;
            border: none;
        }

        .video-item p {
            padding: 10px;
            font-size: 0.9em;
            color: var(--text-color);
        }

        /* Footer */
        footer {
            background-color: var(--bg-card-color);
            color: var(--text-color);
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid var(--primary-color);
            margin-top: 40px;
        }

        /* Admin Panel */
        .admin-panel-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none; /* Hidden by default */
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .admin-panel-content {
            background-color: var(--bg-main-color);
            color: var(--text-color);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .admin-panel-content h2 {
            text-align: center;
            color: var(--gold-color);
            margin-bottom: 20px;
        }

        .admin-panel-content .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--primary-color);
        }

        .admin-panel-content .tabs button {
            background-color: var(--bg-card-color);
            color: var(--text-color);
            padding: 10px 15px;
            border: none;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            transition: background-color 0.3s ease;
        }

        .admin-panel-content .tabs button:hover,
        .admin-panel-content .tabs button.active {
            background-color: var(--primary-color);
        }

        .admin-panel-content .admin-tab-content {
            display: none; /* Hidden by default */
        }

        .admin-panel-content .admin-tab-content.active {
            display: block;
        }

        .admin-panel-content label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent-color);
        }

        .admin-panel-content input[type="text"],
        .admin-panel-content input[type="url"],
        .admin-panel-content input[type="file"],
        .admin-panel-content textarea,
        .admin-panel-content select {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            background-color: var(--bg-card-color);
            color: var(--text-color);
            font-family: var(--main-font);
        }

        .admin-panel-content textarea {
            min-height: 80px;
            resize: vertical;
        }

        .admin-panel-content .btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: 10px;
        }

        .admin-panel-content .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.5em;
            cursor: pointer;
        }

        .admin-login-form {
            text-align: center;
        }

        .admin-login-form input[type="password"] {
            width: 80%;
            max-width: 300px;
            padding: 10px;
            margin: 10px auto;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            background-color: var(--bg-card-color);
            color: var(--text-color);
            font-family: var(--main-font);
        }

        .admin-login-form button {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .admin-login-form button:hover {
            background-color: var(--hover-color);
        }

        /* Drag and Drop Area */
        .drop-area {
            border: 2px dashed var(--accent-color);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            margin-bottom: 15px;
            color: var(--accent-color);
            transition: background-color 0.3s ease;
        }

        .drop-area.highlight {
            background-color: rgba(160, 32, 240, 0.2); /* Purple with transparency */
        }

        /* Gallery Admin Items */
        .admin-gallery-items, .admin-video-items {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .admin-gallery-item, .admin-video-item {
            background-color: var(--bg-card-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .admin-gallery-item img, .admin-video-item img {
            width: 100%;
            height: 100px;
            object-fit: cover;
            display: block;
        }

        .admin-gallery-item p, .admin-video-item p {
            padding: 8px;
            font-size: 0.8em;
            color: var(--text-color);
            word-break: break-all;
            text-align: center;
        }

        .admin-gallery-item .delete-btn, .admin-video-item .delete-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #dc3545;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 4px 8px;
            cursor: pointer;
            font-size: 0.8em;
            transition: background-color 0.3s ease;
        }

        .admin-gallery-item .delete-btn:hover, .admin-video-item .delete-btn:hover {
            background-color: #c82333;
        }

        /* Theme Settings */
        .theme-settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .theme-setting-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .theme-setting-item label {
            font-size: 0.9em;
            color: var(--text-color);
        }

        .theme-setting-item input[type="color"] {
            width: 100%;
            height: 40px;
            border: none;
            padding: 0;
            background: none;
        }

        .theme-setting-item select {
            width: 100%;
            padding: 8px;
            border: 1px solid var(--primary-color);
            border-radius: 5px;
            background-color: var(--bg-card-color);
            color: var(--text-color);
        }

        .theme-action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .theme-action-buttons button {
            width: auto;
            padding: 10px 20px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: center;
            }

            header .logo {
                margin: 0 0 15px 0;
            }

            header nav ul {
                flex-direction: column;
                align-items: center;
                margin-bottom: 15px;
            }

            header nav ul li {
                margin: 0 0 10px 0;
            }

            .hero h1 {
                font-size: 2.5em;
            }

            .hero p {
                font-size: 1em;
                padding: 0 15px;
            }

            .btn {
                padding: 10px 20px;
                font-size: 1em;
            }

            .trilogia h2, .personagens h2, .galeria h2, .videos h2 {
                font-size: 2em;
            }

            .admin-panel-content {
                padding: 20px;
                width: 95%;
            }

            .admin-panel-content .tabs {
                flex-wrap: wrap;
            }

            .admin-panel-content .tabs button {
                flex: 1 1 auto;
                margin-bottom: 5px;
            }

            .theme-settings-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Equilibrium</div>
        <nav>
            <ul>
                <li><a href="#hero">Início</a></li>
                <li><a href="#trilogia">Trilogia</a></li>
                <li><a href="#personagens">Personagens</a></li>
                <li><a href="#galeria">Galeria</a></li>
                <li><a href="#videos">Vídeos</a></li>
            </ul>
        </nav>
        <button id="admin-btn" class="admin-button" disabled>Admin</button>
    </header>

    <main>
        <section id="hero" class="hero">
            <div class="hero-content">
                <h1 id="hero-title">A Trilogia Equilibrium</h1>
                <p id="hero-description">
                    Uma jornada épica de magia, aventura e autodescoberta. Explore os segredos de um mundo onde o equilíbrio é a chave para a sobrevivência.
                </p>
                <a href="#trilogia" class="btn">Saiba Mais</a>
            </div>
        </section>

        <section id="trilogia" class="trilogia container">
            <h2>A Trilogia</h2>
            <div class="trilogia-grid">
                <div class="book-card" id="book1-card">
                    <img id="book1-cover" src="https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+1" alt="Capa Livro 1">
                    <div class="book-card-content">
                        <h3 id="book1-title">Livro 1: O Despertar</h3>
                        <p id="book1-synopsis">Sunagori, um jovem em busca de respostas, descobre um poder ancestral que pode salvar ou destruir seu mundo.</p>
                        <a href="#" class="btn">Comprar</a>
                    </div>
                </div>
                <div class="book-card" id="book2-card">
                    <img id="book2-cover" src="https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+2" alt="Capa Livro 2">
                    <div class="book-card-content">
                        <h3 id="book2-title">Livro 2: O Conflito</h3>
                        <p id="book2-synopsis">Com aliados inesperados, Sunagori enfrenta forças obscuras e dilemas morais que testam seus limites.</p>
                        <a href="#" class="btn">Comprar</a>
                    </div>
                </div>
                <div class="book-card" id="book3-card">
                    <img id="book3-cover" src="https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+3" alt="Capa Livro 3">
                    <div class="book-card-content">
                        <h3 id="book3-title">Livro 3: O Equilíbrio</h3>
                        <p id="book3-synopsis">A batalha final se aproxima, e o destino de todo o universo depende de uma única escolha.</p>
                        <a href="#" class="btn">Comprar</a>
                    </div>
                </div>
            </div>
        </section>

        <section id="personagens" class="personagens container">
            <h2>Personagens</h2>
            <div class="personagens-grid" id="personagens-grid">
                <!-- Personagens serão carregados aqui -->
            </div>
        </section>

        <section id="galeria" class="galeria container">
            <h2>Galeria de Imagens</h2>
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Todas</button>
                <button class="filter-btn" data-filter="personagens">Personagens</button>
                <button class="filter-btn" data-filter="cenarios">Cenários</button>
                <button class="filter-btn" data-filter="criaturas">Criaturas</button>
            </div>
            <div class="galeria-grid" id="galeria-grid">
                <!-- Imagens da galeria serão carregadas aqui -->
            </div>
        </section>

        <section id="videos" class="videos container">
            <h2>Vídeos da Trilogia</h2>
            <div class="video-tabs">
                <button class="video-tab-btn active" data-tab="trailers">Trailers</button>
                <button class="video-tab-btn" data-tab="entrevistas">Entrevistas</button>
                <button class="video-tab-btn" data-tab="bastidores">Bastidores</button>
            </div>
            <div id="trailers" class="video-content active">
                <div class="video-grid" id="trailers-grid">
                    <!-- Trailers serão carregados aqui -->
                </div>
            </div>
            <div id="entrevistas" class="video-content">
                <div class="video-grid" id="entrevistas-grid">
                    <!-- Entrevistas serão carregadas aqui -->
                </div>
            </div>
            <div id="bastidores" class="video-content">
                <div class="video-grid" id="bastidores-grid">
                    <!-- Bastidores serão carregados aqui -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Trilogia Equilibrium. Todos os direitos reservados.</p>
    </footer>

    <!-- Admin Panel -->
    <div id="admin-panel-overlay" class="admin-panel-overlay">
        <div class="admin-panel-content">
            <button class="close-btn" id="close-admin-btn">&times;</button>
            <h2 id="admin-panel-title">Painel Administrativo</h2>

            <div id="admin-login-view">
                <form id="admin-login-form" class="admin-login-form">
                    <label for="admin-password">Senha:</label>
                    <input type="password" id="admin-password" required>
                    <button type="submit" class="btn">Entrar</button>
                    <p style="color: #dc3545; margin-top: 10px;" id="login-error-message"></p>
                </form>
            </div>

            <div id="admin-dashboard-view" style="display: none;">
                <div class="tabs">
                    <button class="admin-tab-btn active" data-tab="fotos">Fotos</button>
                    <button class="admin-tab-btn" data-tab="videos">Vídeos</button>
                    <button class="admin-tab-btn" data-tab="trilogia-edit">Trilogia</button>
                    <button class="admin-tab-btn" data-tab="personagens-edit">Personagens</button>
                    <button class="admin-tab-btn" data-tab="settings">Configurações do Tema</button>
                </div>

                <div id="photos-admin" class="admin-tab-content active">
                    <h3>Gerenciar Fotos</h3>
                    <div class="drop-area" id="drop-area">
                        <p>Arraste e solte imagens aqui ou clique para selecionar</p>
                        <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
                    </div>
                    <label for="image-category">Categoria da Imagem:</label>
                    <select id="image-category">
                        <option value="personagens">Personagens</option>
                        <option value="cenarios">Cenários</option>
                        <option value="criaturas">Criaturas</option>
                    </select>
                    <button class="btn" id="upload-btn">Fazer Upload</button>

                    <h4 style="margin-top: 20px;">Imagens Atuais</h4>
                    <div class="admin-gallery-items" id="admin-gallery-items">
                        <!-- Imagens administrativas serão carregadas aqui -->
                    </div>
                </div>

                <div id="videos-admin" class="admin-tab-content">
                    <h3>Gerenciar Vídeos</h3>
                    <label for="video-url">URL do YouTube:</label>
                    <input type="url" id="video-url" placeholder="https://www.youtube.com/watch?v=..." required>
                    <label for="video-category">Categoria do Vídeo:</label>
                    <select id="video-category">
                        <option value="trailers">Trailers</option>
                        <option value="entrevistas">Entrevistas</option>
                        <option value="bastidores">Bastidores</option>
                    </select>
                    <label for="video-title">Título do Vídeo:</label>
                    <input type="text" id="video-title" placeholder="Título" required>
                    <button class="btn" id="add-video-btn">Adicionar Vídeo</button>

                    <h4 style="margin-top: 20px;">Vídeos Atuais</h4>
                    <div class="admin-video-items" id="admin-video-items">
                        <!-- Vídeos administrativos serão carregados aqui -->
                    </div>
                </div>

                <div id="trilogia-edit" class="admin-tab-content">
                    <h3>Editar Informações da Trilogia</h3>

                    <h4>Livro 1</h4>
                    <label for="edit-book1-title">Título:</label>
                    <input type="text" id="edit-book1-title">
                    <label for="edit-book1-synopsis">Sinopse:</label>
                    <textarea id="edit-book1-synopsis"></textarea>
                    <label for="edit-book1-cover-url">URL da Capa (Livro 1):</label>
                    <input type="url" id="edit-book1-cover-url" placeholder="URL da imagem">

                    <h4>Livro 2</h4>
                    <label for="edit-book2-title">Título:</label>
                    <input type="text" id="edit-book2-title">
                    <label for="edit-book2-synopsis">Sinopse:</label>
                    <textarea id="edit-book2-synopsis"></textarea>
                    <label for="edit-book2-cover-url">URL da Capa (Livro 2):</label>
                    <input type="url" id="edit-book2-cover-url" placeholder="URL da imagem">

                    <h4>Livro 3</h4>
                    <label for="edit-book3-title">Título:</label>
                    <input type="text" id="edit-book3-title">
                    <label for="edit-book3-synopsis">Sinopse:</label>
                    <textarea id="edit-book3-synopsis"></textarea>
                    <label for="edit-book3-cover-url">URL da Capa (Livro 3):</label>
                    <input type="url" id="edit-book3-cover-url" placeholder="URL da imagem">

                    <button class="btn" id="save-trilogia-btn">Salvar Trilogia</button>
                </div>

                <div id="personagens-edit" class="admin-tab-content">
                    <h3>Gerenciar Personagens</h3>
                    <h4>Adicionar/Editar Personagem</h4>
                    <label for="character-id">ID do Personagem (para editar):</label>
                    <input type="text" id="character-id" placeholder="Deixe em branco para novo personagem">
                    <label for="character-name">Nome do Personagem:</label>
                    <input type="text" id="character-name" placeholder="Ex: Sunagori">
                    <label for="character-description">Descrição:</label>
                    <textarea id="character-description"></textarea>
                    <label for="character-image-url">URL da Imagem:</label>
                    <input type="url" id="character-image-url" placeholder="URL da imagem do personagem">
                    <button class="btn" id="add-update-character-btn">Adicionar/Atualizar Personagem</button>

                    <h4 style="margin-top: 20px;">Personagens Atuais</h4>
                    <div id="admin-characters-list">
                        <!-- Lista de personagens para edição/exclusão -->
                    </div>
                </div>

                <div id="settings" class="admin-tab-content">
                    <h3>Configurações do Tema</h3>
                    <div class="theme-settings-grid">
                        <div class="theme-setting-item">
                            <label for="primary-color-picker">Cor Primária:</label>
                            <input type="color" id="primary-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="secondary-color-picker">Cor Secundária:</label>
                            <input type="color" id="secondary-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="accent-color-picker">Cor de Acentuação:</label>
                            <input type="color" id="accent-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="text-color-picker">Cor do Texto:</label>
                            <input type="color" id="text-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="gold-color-picker">Cor Ouro:</label>
                            <input type="color" id="gold-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="bg-main-color-picker">Fundo Principal:</label>
                            <input type="color" id="bg-main-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="bg-card-color-picker">Fundo do Cartão:</label>
                            <input type="color" id="bg-card-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="hover-color-picker">Cor de Hover:</label>
                            <input type="color" id="hover-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="title-color-picker">Cor dos Títulos:</label>
                            <input type="color" id="title-color-picker">
                        </div>
                        <div class="theme-setting-item">
                            <label for="main-font-select">Fonte Principal:</label>
                            <select id="main-font-select">
                                <option value="Arial, sans-serif">Arial</option>
                                <option value="Roboto, sans-serif">Roboto</option>
                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                <option value="Georgia, serif">Georgia</option>
                                <option value="'EB Garamond Medium', serif">EB Garamond Medium</option>
                            </select>
                        </div>
                        <div class="theme-setting-item">
                            <label for="title-font-select">Fonte Títulos:</label>
                            <select id="title-font-select">
                                <option value="Arial, sans-serif">Arial</option>
                                <option value="Roboto, sans-serif">Roboto</option>
                                <option value="'Open Sans', sans-serif">Open Sans</option>
                                <option value="Georgia, serif">Georgia</option>
                                <option value="'EB Garamond Medium', serif">EB Garamond Medium</option>
                            </select>
                        </div>
                    </div>
                    <div class="theme-action-buttons">
                        <button class="btn" id="save-theme-btn">Salvar Tema</button>
                        <button class="btn" id="restore-default-theme-btn">Restaurar Padrão</button>
                    </div>
                    <button class="btn logout-btn" id="admin-logout-btn" style="margin-top: 30px;">Sair</button>
                    <p style="margin-top: 1rem; text-align: center; font-size: 0.9em; color: var(--text-color);">
                        (Esta é uma área de protótipo. A senha 'admin123' não é segura para produção.)
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase Config (YOUR REAL CREDENTIALS HERE)
        const firebaseConfig = {
            apiKey: "AIzaSyD-o0hS692HW7F_13p8cPPS8TWfkIPf90c",
            authDomain: "equilibrium-alex-2.firebaseapp.com",
            databaseURL: "https://equilibrium-alex-2-default-rtdb.firebaseio.com",
            projectId: "equilibrium-alex-2",
            storageBucket: "equilibrium-alex-2.firebasestorage.app",
            messagingSenderId: "684128804738",
            appId: "1:684128804738:web:a9ba266b2a53d82bc7799b"
        };

        // Initialize Firebase
        let app;
        try {
            app = firebase.initializeApp(firebaseConfig);
            console.log("Firebase initialized successfully.");
            document.getElementById('admin-btn').disabled = false;
        } catch (error) {
            console.error("Firebase initialization error:", error);
            alert("Erro ao inicializar Firebase. Verifique as credenciais no console.");
            document.getElementById('admin-btn').disabled = true;
        }

        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Admin Panel Elements
        const adminBtn = document.getElementById('admin-btn');
        const adminPanelOverlay = document.getElementById('admin-panel-overlay');
        const closeAdminBtn = document.getElementById('close-admin-btn');
        const adminLoginView = document.getElementById('admin-login-view');
        const adminDashboardView = document.getElementById('admin-dashboard-view');
        const adminLoginForm = document.getElementById('admin-login-form');
        const adminPasswordInput = document.getElementById('admin-password');
        const loginErrorMessage = document.getElementById('login-error-message');
        const adminTabBtns = document.querySelectorAll('.admin-tab-btn');
        const adminTabContents = document.querySelectorAll('.admin-tab-content');
        const adminLogoutBtn = document.getElementById('admin-logout-btn');

        // Theme Settings Elements
        const root = document.documentElement;
        const colorPickers = {
            'primary-color': document.getElementById('primary-color-picker'),
            'secondary-color': document.getElementById('secondary-color-picker'),
            'accent-color': document.getElementById('accent-color-picker'),
            'text-color': document.getElementById('text-color-picker'),
            'gold-color': document.getElementById('gold-color-picker'),
            'bg-main-color': document.getElementById('bg-main-color-picker'),
            'bg-card-color': document.getElementById('bg-card-color-picker'),
            'hover-color': document.getElementById('hover-color-picker'),
            'title-color': document.getElementById('title-color-picker'),
        };
        const mainFontSelect = document.getElementById('main-font-select');
        const titleFontSelect = document.getElementById('title-font-select');
        const saveThemeBtn = document.getElementById('save-theme-btn');
        const restoreDefaultThemeBtn = document.getElementById('restore-default-theme-btn');

        // Default Theme (CSS variables)
        const defaultTheme = {
            '--primary-color': '#6a0572',
            '--secondary-color': '#a020f0',
            '--accent-color': '#e0b0ff',
            '--text-color': '#f0f0f0',
            '--gold-color': '#ffd700',
            '--bg-main-color': '#1a1a2e',
            '--bg-card-color': '#1f2838',
            '--hover-color': '#8a2be2',
            '--title-color': '#e0e0e0',
            '--main-font': 'Arial, sans-serif',
            '--title-font': 'Arial, sans-serif',
        };

        // --- Auth State Listener ---
        let adminLoggedIn = false;
        auth.onAuthStateChanged(user => {
            if (user) {
                adminLoggedIn = true;
                adminLoginView.style.display = 'none';
                adminDashboardView.style.display = 'block';
                console.log("Admin logged in.");
            } else {
                adminLoggedIn = false;
                adminLoginView.style.display = 'block';
                adminDashboardView.style.display = 'none';
                loginErrorMessage.textContent = '';
                adminPasswordInput.value = '';
                console.log("Admin logged out.");
            }
        });

        // --- Admin Panel Toggle ---
        adminBtn.addEventListener('click', () => {
            adminPanelOverlay.style.display = 'flex';
        });

        closeAdminBtn.addEventListener('click', () => {
            adminPanelOverlay.style.display = 'none';
        });

        // --- Admin Login ---
        adminLoginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const password = adminPasswordInput.value;
            if (password === 'admin123') { // Simple password check (NOT SECURE FOR PRODUCTION)
                try {
                    // Use anonymous authentication for simplicity for now
                    // For production, use email/password or other secure methods
                    await auth.signInAnonymously();
                    loginErrorMessage.textContent = '';
                } catch (error) {
                    console.error("Anonymous auth error:", error);
                    loginErrorMessage.textContent = 'Erro ao fazer login. Tente novamente.';
                }
            } else {
                loginErrorMessage.textContent = 'Senha incorreta.';
            }
        });

        // --- Admin Logout ---
        adminLogoutBtn.addEventListener('click', async () => {
            try {
                await auth.signOut();
            } catch (error) {
                console.error("Logout error:", error);
            }
        });

        // --- Admin Tab Switching ---
        adminTabBtns.forEach(button => {
            button.addEventListener('click', () => {
                adminTabBtns.forEach(btn => btn.classList.remove('active'));
                adminTabContents.forEach(content => content.classList.remove('active'));

                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');

                // Load data specific to the tab
                if (button.dataset.tab === 'photos') {
                    loadAdminGalleryItems();
                } else if (button.dataset.tab === 'videos') {
                    loadAdminVideoItems();
                } else if (button.dataset.tab === 'trilogia-edit') {
                    loadTrilogiaEditData();
                } else if (button.dataset.tab === 'personagens-edit') {
                    loadAdminCharacters();
                } else if (button.dataset.tab === 'settings') {
                    loadThemeSettings();
                }
            });
        });

        // --- Theme Settings Logic ---
        function applyTheme(theme) {
            for (const prop in theme) {
                root.style.setProperty(prop, theme[prop]);
            }
            // Update select boxes to reflect current theme
            mainFontSelect.value = theme['--main-font'];
            titleFontSelect.value = theme['--title-font'];
        }

        function loadThemeSettings() {
            // Populate color pickers with current CSS values
            for (const key in colorPickers) {
                const cssVar = `--${key.replace('-picker', '')}`;
                colorPickers[key].value = getComputedStyle(root).getPropertyValue(cssVar).trim();
            }
            // Populate font selects
            mainFontSelect.value = getComputedStyle(root).getPropertyValue('--main-font').trim();
            titleFontSelect.value = getComputedStyle(root).getPropertyValue('--title-font').trim();
        }

        // Live update on color/font change
        for (const key in colorPickers) {
            const picker = colorPickers[key];
            const cssVar = `--${key.replace('-picker', '')}`;
            picker.addEventListener('input', (e) => {
                root.style.setProperty(cssVar, e.target.value);
            });
        }
        mainFontSelect.addEventListener('change', (e) => {
            root.style.setProperty('--main-font', e.target.value);
        });
        titleFontSelect.addEventListener('change', (e) => {
            root.style.setProperty('--title-font', e.target.value);
        });

        saveThemeBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");

            const currentTheme = {};
            for (const key in colorPickers) {
                const cssVar = `--${key.replace('-picker', '')}`;
                currentTheme[cssVar] = colorPickers[key].value;
            }
            currentTheme['--main-font'] = mainFontSelect.value;
            currentTheme['--title-font'] = titleFontSelect.value;

            try {
                await database.ref('theme').set(currentTheme);
                alert("Tema salvo com sucesso!");
            } catch (error) {
                console.error("Erro ao salvar tema:", error);
                alert("Erro ao salvar tema.");
            }
        });

        restoreDefaultThemeBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");

            try {
                await database.ref('theme').set(defaultTheme);
                applyTheme(defaultTheme);
                alert("Tema restaurado para o padrão!");
                loadThemeSettings(); // Update pickers
            } catch (error) {
                console.error("Erro ao restaurar tema:", error);
                alert("Erro ao restaurar tema.");
            }
        });

        // Load theme on page load
        database.ref('theme').on('value', (snapshot) => {
            const savedTheme = snapshot.val();
            if (savedTheme) {
                applyTheme(savedTheme);
            } else {
                applyTheme(defaultTheme); // Apply default if no theme saved
            }
        });


        // --- Gallery Upload (Drag & Drop) ---
        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('file-input');
        const uploadBtn = document.getElementById('upload-btn');
        const imageCategorySelect = document.getElementById('image-category');
        let filesToUpload = [];

        dropArea.addEventListener('click', () => fileInput.click());

        fileInput.addEventListener('change', (e) => {
            filesToUpload = Array.from(e.target.files);
            if (filesToUpload.length > 0) {
                dropArea.textContent = `${filesToUpload.length} arquivo(s) selecionado(s).`;
            } else {
                dropArea.textContent = `Arraste e solte imagens aqui ou clique para selecionar.`;
            }
        });

        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.add('highlight'), false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            dropArea.addEventListener(eventName, () => dropArea.classList.remove('highlight'), false);
        });

        dropArea.addEventListener('drop', (e) => {
            filesToUpload = Array.from(e.dataTransfer.files);
            if (filesToUpload.length > 0) {
                dropArea.textContent = `${filesToUpload.length} arquivo(s) selecionado(s).`;
            }
        }, false);

        uploadBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");
            if (filesToUpload.length === 0) return alert("Nenhum arquivo selecionado para upload.");

            for (const file of filesToUpload) {
                const storageRef = storage.ref(`gallery/${imageCategorySelect.value}/${file.name}`);
                const uploadTask = storageRef.put(file);

                uploadTask.on('state_changed',
                    (snapshot) => {
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        console.log('Upload is ' + progress + '% done');
                        // You could update a progress bar here
                    },
                    (error) => {
                        console.error("Upload failed:", error);
                        alert(`Erro ao fazer upload de ${file.name}.`);
                    },
                    async () => {
                        const downloadURL = await storageRef.getDownloadURL();
                        await database.ref(`gallery/${imageCategorySelect.value}`).push({
                            url: downloadURL,
                            name: file.name,
                            category: imageCategorySelect.value,
                            timestamp: firebase.database.ServerValue.TIMESTAMP
                        });
                        console.log(`Uploaded ${file.name} to ${downloadURL}`);
                        loadAdminGalleryItems(); // Refresh admin gallery
                        loadGalleryItems(); // Refresh public gallery
                    }
                );
            }
            alert(`${filesToUpload.length} arquivo(s) enviados para o Firebase.`);
            filesToUpload = [];
            fileInput.value = '';
            dropArea.textContent = `Arraste e solte imagens aqui ou clique para selecionar.`;
        });

        // --- Load Admin Gallery Items ---
        const adminGalleryItemsContainer = document.getElementById('admin-gallery-items');
        async function loadAdminGalleryItems() {
            if (!adminLoggedIn) {
                adminGalleryItemsContainer.innerHTML = '<p>Faça login para ver as imagens.</p>';
                return;
            }
            adminGalleryItemsContainer.innerHTML = ''; // Clear previous items

            const snapshot = await database.ref('gallery').once('value');
            const categories = snapshot.val();

            if (categories) {
                for (const category in categories) {
                    for (const key in categories[category]) {
                        const item = categories[category][key];
                        const div = document.createElement('div');
                        div.className = 'admin-gallery-item';
                        div.innerHTML = `
                            <img src="${item.url}" alt="${item.name || 'Imagem'}">
                            <p>${item.name || 'Sem nome'}</p>
                            <button class="delete-btn" data-key="${key}" data-category="${category}" data-url="${item.url}">Excluir</button>
                        `;
                        adminGalleryItemsContainer.appendChild(div);
                    }
                }
            }
        }

        adminGalleryItemsContainer.addEventListener('click', async (e) => {
            if (e.target.classList.contains('delete-btn')) {
                if (!adminLoggedIn) return alert("Você não está logado como admin.");
                if (!confirm("Tem certeza que deseja excluir esta imagem?")) return;

                const key = e.target.dataset.key;
                const category = e.target.dataset.category;
                const imageUrl = e.target.dataset.url;

                try {
                    // Delete from Storage
                    const imageRef = storage.refFromURL(imageUrl);
                    await imageRef.delete();
                    // Delete from Realtime Database
                    await database.ref(`gallery/${category}/${key}`).remove();
                    alert("Imagem excluída com sucesso!");
                    loadAdminGalleryItems();
                    loadGalleryItems();
                } catch (error) {
                    console.error("Erro ao excluir imagem:", error);
                    alert("Erro ao excluir imagem.");
                }
            }
        });


        // --- Public Gallery Items ---
        const publicGalleryGrid = document.getElementById('galeria-grid');
        const filterBtns = document.querySelectorAll('.filter-btn');

        async function loadGalleryItems(filter = 'all') {
            publicGalleryGrid.innerHTML = '';
            const snapshot = await database.ref('gallery').once('value');
            const categories = snapshot.val();

            if (categories) {
                for (const categoryName in categories) {
                    if (filter === 'all' || filter === categoryName) {
                        for (const key in categories[categoryName]) {
                            const item = categories[categoryName][key];
                            const div = document.createElement('div');
                            div.className = 'gallery-item';
                            div.setAttribute('data-category', item.category);
                            div.innerHTML = `
                                <img src="${item.url}" alt="${item.name || 'Imagem'}">
                                <p>${item.name || 'Sem nome'}</p>
                            `;
                            publicGalleryGrid.appendChild(div);
                        }
                    }
                }
            }
        }

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                loadGalleryItems(btn.dataset.filter);
            });
        });

        // --- Video Management ---
        const videoUrlInput = document.getElementById('video-url');
        const videoCategoryInput = document.getElementById('video-category');
        const videoTitleInput = document.getElementById('video-title');
        const addVideoBtn = document.getElementById('add-video-btn');
        const adminVideoItemsContainer = document.getElementById('admin-video-items');

        function getYouTubeThumbnail(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            if (match && match[2].length === 11) {
                return `https://img.youtube.com/vi/${match[2]}/mqdefault.jpg`; // Max res thumbnail
            }
            return 'https://via.placeholder.com/120x90/000000/FFFFFF?text=Invalid+URL';
        }

        addVideoBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");
            const url = videoUrlInput.value;
            const category = videoCategoryInput.value;
            const title = videoTitleInput.value;

            if (!url || !category || !title) {
                return alert("Por favor, preencha todos os campos do vídeo.");
            }

            const thumbnailUrl = getYouTubeThumbnail(url);

            try {
                await database.ref(`videos/${category}`).push({
                    url: url,
                    title: title,
                    category: category,
                    thumbnail: thumbnailUrl,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                alert("Vídeo adicionado com sucesso!");
                videoUrlInput.value = '';
                videoTitleInput.value = '';
                loadAdminVideoItems();
                loadPublicVideos();
            } catch (error) {
                console.error("Erro ao adicionar vídeo:", error);
                alert("Erro ao adicionar vídeo.");
            }
        });

        async function loadAdminVideoItems() {
            if (!adminLoggedIn) {
                adminVideoItemsContainer.innerHTML = '<p>Faça login para ver os vídeos.</p>';
                return;
            }
            adminVideoItemsContainer.innerHTML = '';
            const snapshot = await database.ref('videos').once('value');
            const categories = snapshot.val();

            if (categories) {
                for (const category in categories) {
                    for (const key in categories[category]) {
                        const item = categories[category][key];
                        const div = document.createElement('div');
                        div.className = 'admin-video-item';
                        div.innerHTML = `
                            <img src="${item.thumbnail}" alt="${item.title || 'Vídeo'}">
                            <p>${item.title || 'Sem título'}</p>
                            <button class="delete-btn" data-key="${key}" data-category="${category}">Excluir</button>
                        `;
                        adminVideoItemsContainer.appendChild(div);
                    }
                }
            }
        }

        adminVideoItemsContainer.addEventListener('click', async (e) => {
            if (e.target.classList.contains('delete-btn')) {
                if (!adminLoggedIn) return alert("Você não está logado como admin.");
                if (!confirm("Tem certeza que deseja excluir este vídeo?")) return;

                const key = e.target.dataset.key;
                const category = e.target.dataset.category;

                try {
                    await database.ref(`videos/${category}/${key}`).remove();
                    alert("Vídeo excluído com sucesso!");
                    loadAdminVideoItems();
                    loadPublicVideos();
                } catch (error) {
                    console.error("Erro ao excluir vídeo:", error);
                    alert("Erro ao excluir vídeo.");
                }
            }
        });

        // --- Public Video Display ---
        const videoTabBtns = document.querySelectorAll('.video-tab-btn');
        const videoContents = document.querySelectorAll('.video-content');
        const trailersGrid = document.getElementById('trailers-grid');
        const entrevistasGrid = document.getElementById('entrevistas-grid');
        const bastidoresGrid = document.getElementById('bastidores-grid');

        videoTabBtns.forEach(button => {
            button.addEventListener('click', () => {
                videoTabBtns.forEach(btn => btn.classList.remove('active'));
                videoContents.forEach(content => content.classList.remove('active'));

                button.classList.add('active');
                document.getElementById(button.dataset.tab).classList.add('active');
            });
        });

        async function loadPublicVideos() {
            trailersGrid.innerHTML = '';
            entrevistasGrid.innerHTML = '';
            bastidoresGrid.innerHTML = '';

            const snapshot = await database.ref('videos').once('value');
            const categories = snapshot.val();

            if (categories) {
                for (const categoryName in categories) {
                    for (const key in categories[categoryName]) {
                        const item = categories[categoryName][key];
                        const videoId = item.url.match(/(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|[^#]*[&?]v=))([^"&?\/\s]{11})/);
                        const iframeSrc = videoId ? `https://www.youtube.com/embed/${videoId[1]}` : item.url;

                        const div = document.createElement('div');
                        div.className = 'video-item';
                        div.innerHTML = `
                            <iframe src="${iframeSrc}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            <p>${item.title}</p>
                        `;

                        if (categoryName === 'trailers') trailersGrid.appendChild(div);
                        else if (categoryName === 'entrevistas') entrevistasGrid.appendChild(div);
                        else if (categoryName === 'bastidores') bastidoresGrid.appendChild(div);
                    }
                }
            }
        }

        // --- Trilogia Edit ---
        const editBook1Title = document.getElementById('edit-book1-title');
        const editBook1Synopsis = document.getElementById('edit-book1-synopsis');
        const editBook1CoverUrl = document.getElementById('edit-book1-cover-url');
        const editBook2Title = document.getElementById('edit-book2-title');
        const editBook2Synopsis = document.getElementById('edit-book2-synopsis');
        const editBook2CoverUrl = document.getElementById('edit-book2-cover-url');
        const editBook3Title = document.getElementById('edit-book3-title');
        const editBook3Synopsis = document.getElementById('edit-book3-synopsis');
        const editBook3CoverUrl = document.getElementById('edit-book3-cover-url');
        const saveTrilogiaBtn = document.getElementById('save-trilogia-btn');

        async function loadTrilogiaEditData() {
            if (!adminLoggedIn) return;
            const snapshot = await database.ref('trilogia').once('value');
            const data = snapshot.val();

            if (data) {
                editBook1Title.value = data.book1?.title || '';
                editBook1Synopsis.value = data.book1?.synopsis || '';
                editBook1CoverUrl.value = data.book1?.cover || '';
                editBook2Title.value = data.book2?.title || '';
                editBook2Synopsis.value = data.book2?.synopsis || '';
                editBook2CoverUrl.value = data.book2?.cover || '';
                editBook3Title.value = data.book3?.title || '';
                editBook3Synopsis.value = data.book3?.synopsis || '';
                editBook3CoverUrl.value = data.book3?.cover || '';
            }
        }

        saveTrilogiaBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");

            const trilogiaData = {
                book1: {
                    title: editBook1Title.value,
                    synopsis: editBook1Synopsis.value,
                    cover: editBook1CoverUrl.value
                },
                book2: {
                    title: editBook2Title.value,
                    synopsis: editBook2Synopsis.value,
                    cover: editBook2CoverUrl.value
                },
                book3: {
                    title: editBook3Title.value,
                    synopsis: editBook3Synopsis.value,
                    cover: editBook3CoverUrl.value
                }
            };

            try {
                await database.ref('trilogia').set(trilogiaData);
                alert("Informações da trilogia salvas com sucesso!");
                loadTrilogiaData(); // Update public site
            } catch (error) {
                console.error("Erro ao salvar trilogia:", error);
                alert("Erro ao salvar trilogia.");
            }
        });

        // --- Public Trilogia Display ---
        async function loadTrilogiaData() {
            const snapshot = await database.ref('trilogia').once('value');
            const data = snapshot.val();

            if (data) {
                document.getElementById('book1-title').textContent = data.book1?.title || 'Livro 1: Título';
                document.getElementById('book1-synopsis').textContent = data.book1?.synopsis || 'Sinopse do Livro 1';
                document.getElementById('book1-cover').src = data.book1?.cover || 'https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+1';

                document.getElementById('book2-title').textContent = data.book2?.title || 'Livro 2: Título';
                document.getElementById('book2-synopsis').textContent = data.book2?.synopsis || 'Sinopse do Livro 2';
                document.getElementById('book2-cover').src = data.book2?.cover || 'https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+2';

                document.getElementById('book3-title').textContent = data.book3?.title || 'Livro 3: Título';
                document.getElementById('book3-synopsis').textContent = data.book3?.synopsis || 'Sinopse do Livro 3';
                document.getElementById('book3-cover').src = data.book3?.cover || 'https://via.placeholder.com/300x450/000000/FFFFFF?text=Livro+3';
            }
        }

        // --- Personagens Edit ---
        const characterIdInput = document.getElementById('character-id');
        const characterNameInput = document.getElementById('character-name');
        const characterDescriptionInput = document.getElementById('character-description');
        const characterImageUrlInput = document.getElementById('character-image-url');
        const addUpdateCharacterBtn = document.getElementById('add-update-character-btn');
        const adminCharactersList = document.getElementById('admin-characters-list');

        addUpdateCharacterBtn.addEventListener('click', async () => {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");

            const id = characterIdInput.value;
            const name = characterNameInput.value;
            const description = characterDescriptionInput.value;
            const imageUrl = characterImageUrlInput.value;

            if (!name || !description || !imageUrl) {
                return alert("Por favor, preencha todos os campos do personagem.");
            }

            try {
                if (id) {
                    await database.ref(`personagens/${id}`).update({ name, description, imageUrl });
                    alert("Personagem atualizado com sucesso!");
                } else {
                    await database.ref('personagens').push({ name, description, imageUrl });
                    alert("Personagem adicionado com sucesso!");
                }
                characterIdInput.value = '';
                characterNameInput.value = '';
                characterDescriptionInput.value = '';
                characterImageUrlInput.value = '';
                loadAdminCharacters();
                loadPublicCharacters();
            } catch (error) {
                console.error("Erro ao salvar personagem:", error);
                alert("Erro ao salvar personagem.");
            }
        });

        async function loadAdminCharacters() {
            if (!adminLoggedIn) {
                adminCharactersList.innerHTML = '<p>Faça login para gerenciar personagens.</p>';
                return;
            }
            adminCharactersList.innerHTML = '';
            const snapshot = await database.ref('personagens').once('value');
            const characters = snapshot.val();

            if (characters) {
                for (const key in characters) {
                    const char = characters[key];
                    const div = document.createElement('div');
                    div.style.borderBottom = '1px solid #444';
                    div.style.padding = '10px 0';
                    div.innerHTML = `
                        <p><strong>ID:</strong> ${key}</p>
                        <p><strong>Nome:</strong> ${char.name}</p>
                        <button class="btn" style="width: auto; margin-right: 10px;" onclick="editCharacter('${key}', '${char.name}', '${char.description}', '${char.imageUrl}')">Editar</button>
                        <button class="btn delete-btn" style="width: auto; background-color: #dc3545;" onclick="deleteCharacter('${key}')">Excluir</button>
                    `;
                    adminCharactersList.appendChild(div);
                }
            }
        }

        function editCharacter(id, name, description, imageUrl) {
            characterIdInput.value = id;
            characterNameInput.value = name;
            characterDescriptionInput.value = description;
            characterImageUrlInput.value = imageUrl;
            // Optionally scroll to top of form
            characterIdInput.scrollIntoView({ behavior: 'smooth' });
        }

        async function deleteCharacter(id) {
            if (!adminLoggedIn) return alert("Você não está logado como admin.");
            if (!confirm("Tem certeza que deseja excluir este personagem?")) return;

            try {
                await database.ref(`personagens/${id}`).remove();
                alert("Personagem excluído com sucesso!");
                loadAdminCharacters();
                loadPublicCharacters();
            } catch (error) {
                console.error("Erro ao excluir personagem:", error);
                alert("Erro ao excluir personagem.");
            }
        }

        // --- Public Characters Display ---
        const publicPersonagensGrid = document.getElementById('personagens-grid');

        async function loadPublicCharacters() {
            publicPersonagensGrid.innerHTML = '';
            const snapshot = await database.ref('personagens').once('value');
            const characters = snapshot.val();

            if (characters) {
                for (const key in characters) {
                    const char = characters[key];
                    const div = document.createElement('div');
                    div.className = 'character-card';
                    div.innerHTML = `
                        <img src="${char.imageUrl}" alt="${char.name}">
                        <h3>${char.name}</h3>
                        <p>${char.description}</p>
                    `;
                    publicPersonagensGrid.appendChild(div);
                }
            }
        }

        // --- Initial Data Load ---
        document.addEventListener('DOMContentLoaded', () => {
            loadTrilogiaData();
            loadPublicCharacters();
            loadGalleryItems();
            loadPublicVideos();
        });
    </script>
</body>
</html>
```